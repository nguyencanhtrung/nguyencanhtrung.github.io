<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>5G LDPC - Base Matrices | Trung Canh Nguyen</title> <meta name="author" content="Trung Canh Nguyen"/> <meta name="description" content="Describing 5G LDPC base matrix and how to construct it"/> <meta name="keywords" content="catapult, fpga, vhdl, hdl, intel, xilinx"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://bobibo.one/blog/2022/ldpc-base-matrix/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <d-front-matter> <script async type="text/json">{
      "title": "5G LDPC - Base Matrices",
      "description": "Describing 5G LDPC base matrix and how to construct it",
      "published": "October 6, 2022",
      "authors": [
        {
          "author": "Nguyen Canh Trung",
          "authorURL": "https://bobibo.one",
          "affiliations": [
            {
              "name": "bobibo.one",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script> </d-front-matter> <body class="fixed-top-nav"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Trung </span>Canh Nguyen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Resume</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Collections</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/blog/tag/core/">Fundamental</a> <a class="dropdown-item" href="/blog/tag/hdl/">HDL</a> <a class="dropdown-item" href="/blog/tag/hls/">HLS</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/blog/tag/catapult/">Catapult</a> <a class="dropdown-item" href="/blog/tag/intel/">Intel</a> <a class="dropdown-item" href="/blog/tag/xilinx/">Xilinx</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="post distill"> <d-title> <h1>5G LDPC - Base Matrices</h1> <p>Describing 5G LDPC base matrix and how to construct it</p> </d-title> <d-byline></d-byline> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <div><a href="#1-overview">1. Overview</a></div> <div><a href="#2-base-matrix-b-and-parity-check-matrix-h">2. Base matrix (B) and parity check matrix (H)</a></div> <div><a href="#3-base-matrix-structure">3. Base matrix structure</a></div> <div><a href="#4-how-to-construct-5g-ldpc-base-matrices">4. How to construct 5G LDPC base matrices</a></div> <div><a href="#5-precomputed-base-matrices">5. Precomputed base matrices</a></div> <div><a href="#6-references">6. References</a></div> </nav> </d-contents> <h2 id="1-overview">1. Overview</h2> <p>Ma trận cơ sở B là một trong những thông tin cần phải được hiểu rõ trong khi tìm hiểu giải thuật mã hóa và giải mã LDPC. Ma trận này khi được triển khai trên FPGA sẽ được lưu dưới dạng ROM, hay nói cách khác chúng sẽ được tính toán trước (pre-computed) thay vì tính toán on-fly. Phần dưới đây sẽ mô tả các đặc tính của một ma trận cơ sở cũng như cách chúng được xây dựng.</p> <h2 id="2-base-matrix-b-and-parity-check-matrix-h">2. Base matrix (B) and parity check matrix (H)</h2> <p><b>Ma trận cơ sở B</b> là một ma trận có kích thước như sau:</p> <ul> <li>Base graph 1: 46 hàng x 68 cột</li> <li>Base graph 2: 42 hàng x 52 cột</li> </ul> <p><b>Ma trận H</b> được tạo thành từ việc thay thế các phần tử của ma trận cơ sở B, bằng các ma trận có kích thước Zc x Zc. Cụ thể, các phần tử của ma trận cơ sở sẽ có một trong các giá trị sau và tương ứng là ma trận kích thước ZcxZc</p> <table> <thead> <tr> <th style="text-align: center"><b>Giá trị</b></th> <th style="text-align: center"><b>Ý nghĩa</b></th> </tr> </thead> <tbody> <tr> <td style="text-align: center">-1</td> <td style="text-align: center">Ignore &lt;=&gt; Ma trận 0</td> </tr> <tr> <td style="text-align: center">0</td> <td style="text-align: center">Ma trận I (Identity matrix)</td> </tr> <tr> <td style="text-align: center">\(Zc &gt; a &gt; 0\)</td> <td style="text-align: center">Ma trận I được shift phải \(a\) lần</td> </tr> </tbody> </table> <p><br> Hình dưới đây là một ví dụ. Với expansion factor = 5 hay Zc = 5 (Một số tài liệu họ gọi là lifting factor hay có thể ký hiệu là Z). Chi tiết về Zc có thể xem tại <a href="https://bobibo.one/blog/2022/ldpc-lifting-factor/">đây</a>.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/1-1400.webp"></source> <img src="/assets/img/01.blogs/221006_ldpc_basematrix/1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="3-base-matrix-structure">3. Base matrix structure</h2> <p>Ma trận cơ sở có kích thước khác nhau ứng với mỗi loại base graph. Tuy nhiên, chúng đều có chung một cấu trúc như sau:</p> \[B = \left[\begin{array}{cc} A &amp; E &amp; O \\ C_1 &amp; C_2 &amp; I \end{array}\right]\] <p>Trong đó, kích thước của từng ma trận sẽ là:</p> <table> <thead> <tr> <th style="text-align: center"><b>Ma trận</b></th> <th style="text-align: center"><b>Base graph 1</b></th> <th style="text-align: center"><b>Base graph 2</b></th> </tr> </thead> <tbody> <tr> <td style="text-align: center">A</td> <td style="text-align: center">4 x 22</td> <td style="text-align: center">4 x 10</td> </tr> <tr> <td style="text-align: center">E</td> <td style="text-align: center">4 x 4</td> <td style="text-align: center">4 x 4</td> </tr> <tr> <td style="text-align: center">\(C_1\)</td> <td style="text-align: center">42 x 22</td> <td style="text-align: center">38 x 10</td> </tr> <tr> <td style="text-align: center">\(C_2\)</td> <td style="text-align: center">42 x 4</td> <td style="text-align: center">38 x 4</td> </tr> <tr> <td style="text-align: center">O</td> <td style="text-align: center">4 x 42</td> <td style="text-align: center">4 x 38</td> </tr> <tr> <td style="text-align: center">I</td> <td style="text-align: center">42 x 42</td> <td style="text-align: center">38 x 38</td> </tr> </tbody> </table> <p>Ma trận \(A, E\) được sử dụng để tính 4 parity bit đầu tiên (Ký hiệu: \(p_a\)).</p> <p>Ma trận \(C_1, C_2\) được sử dụng cùng với 4 parity bit đầu tiên {\(p_{a_1}, p_{a_2}, p_{a_3}, p_{a_4}\)} để tính các parity bit còn lại (Ký hiệu: \(p_c\)).</p> <p>Ma trận \(O, I\) có thể bỏ qua trong quá trình tính toán.</p> <p>Để dễ hiểu hơn, ta có thể nhìn vào hình sau:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/4-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/4-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/4-1400.webp"></source> <img src="/assets/img/01.blogs/221006_ldpc_basematrix/4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Ma trận \(E\) là một ma trận đặc biệt có tên gọi “Ma trận đường chéo đôi” (Double diagonal matrix). Đặc tính của ma trận này, giúp việc tính toán 4 parity bits (\(p_a\)) trở lên đơn giản và hiệu quả hơn. Cụ thể, quá trình tính toán sẽ được mô tả ở bài viết <a href="www.bobibo.one">5G LDPC encoder</a>.</p> <h2 id="4-how-to-construct-5g-ldpc-base-matrices">4. How to construct 5G LDPC base matrices</h2> <p>Ma trận cơ sở B sẽ được xây dựng dựa trên ba tham số { <b><code class="language-plaintext highlighter-rouge">NBG</code>, \(i_{LS}\), \(Z_{c}\)</b> }</p> <p>Từ tham số <code class="language-plaintext highlighter-rouge">NBG</code> và \(i_{LS}\), ta sử dụng bảng 5.3.2-2 và 5.3.2-3 trong 3GPP-38.212 (Section 5.3.2) để xây dựng lên base matrix cho giá trị \(Z_c\) lớn nhất.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/2-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/2-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/2-1400.webp"></source> <img src="/assets/img/01.blogs/221006_ldpc_basematrix/2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p><b>Ví dụ</b></p> <p>NBG = 2 (Base graph 2), \(i_{LS} = 6\). Tra theo bảng 5.3.2-3</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/3-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/3-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/01.blogs/221006_ldpc_basematrix/3-1400.webp"></source> <img src="/assets/img/01.blogs/221006_ldpc_basematrix/3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Ta sẽ có base matrix của \(Z_c = 208\) sẽ là:</p> \[B = \left[\begin{array}{cc} 143 &amp; 19 &amp; 176 &amp; 165 &amp; -1 &amp; -1 &amp; 196 &amp; -1 &amp; -1 &amp; 13 &amp; 0 &amp; 0 &amp; -1 &amp; -1 &amp; -1 &amp; ... \\ 18 &amp; -1 &amp; -1 &amp; 27 &amp; 3 &amp; 102 &amp; 185 &amp; 17 &amp; 14 &amp; 180 &amp; -1 &amp; 0 &amp; 0 &amp; -1 &amp; -1 &amp; ... \\ ... \end{array}\right]\] <p>Với các trường hợp còn lại của \(Z_c = 13, 26, 52, 104\) ứng với \(i_{LS} = 6\). Giá trị của mỗi element sẽ được tính theo công thức:</p> \[b = a \bmod Zc (1)\] <p>Trong đó:</p> <ul> <li>a là giá trị của element trong ma trận B ứng với \(Z_c\) lớn nhất</li> <li>b là giá trị của element của ma trận B ứng với \(Z_c\) cần tính</li> </ul> <p>Khi \(Z_c = 13\) thì ma trận B sẽ trở thành:</p> \[B = \left[\begin{array}{cc} 0 &amp; 6 &amp; 7 &amp; 9 &amp; -1 &amp; -1 &amp; 1 &amp; -1 &amp; -1 &amp; 0 &amp; 0 &amp; 0 &amp; -1 &amp; -1 &amp; -1 &amp; ... \\ 5 &amp; -1 &amp; -1 &amp; 1 &amp; 3 &amp; 11 &amp; 3 &amp; 4 &amp; 1 &amp; 11 &amp; -1 &amp; 0 &amp; 0 &amp; -1 &amp; -1 &amp; ... \\ ... \end{array}\right]\] <p><b>Kết luận</b></p> <ul> <li>Có 51 giá trị \(Z_c\), tương ứng sẽ có 51 ma trận cơ sở B với mỗi Base Graph. Do đó, 5G LDPC sẽ có tổng cộng 102 ma trận cơ sở. Việc thiết kế FPGA sẽ cần phải tối ưu việc lưu trữ các ma trận này để đảm bảo tiết kiệm tài nguyên nhớ và không bị “nghẽn cổ chai” khi thực thi việc mã hóa và giải mã.</li> <li>Trong thực tế, không cần phải lưu trữ hết 102 ma trận cơ sở, thay vào đó chỉ cần lưu trữ 16 ma trận cơ sở ứng với mỗi một index \(i_{LS}\) ( mỗi một base graph có 8 ma trận dạng này). Ma trận này là ma trận cơ sở của \(Z_c\) lớn nhất trong mỗi index. Các ma trận cơ sở khác sẽ được tính toán “on-fly” dựa trên công thức. Điều này giúp giảm tài nguyên nhớ sử dụng.</li> <li>Để giảm hơn nữa tài nguyên nhớ, như đã phân tích ở trên, thực hiện mã hóa thông tin chỉ cần 4 thành phần của ma trận cơ sở là \(A, E, C_1, C_2\). Do đó, chỉ cần lưu trữ 4 ma trận thành phần trong một ma trận cơ sở mà thôi.</li> </ul> <h2 id="5-precomputed-base-matrices">5. Precomputed base matrices</h2> <p>102 ma trận cơ sở của 5G LDPC có thể xem tại <a href="www.bobibo.one">đây</a></p> <h2 id="6-references">6. References</h2> <p><a href="https://panel.castle.cloud/view_spec/38212-f11/" target="_blank" rel="noopener noreferrer">3GPP - 38.212 - section 5.3.2</a></p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Trung Canh Nguyen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. Last updated: November 09, 2023. </div> </footer> <d-bibliography src="/assets/bibliography/"></d-bibliography> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> </body> </html>